/**
 * Responsive Utilities for Messaging
 * 
 * Comprehensive responsive design utilities for different screen sizes
 * and device types, ensuring optimal user experience across all devices.
 */

/* Breakpoints */
:root {
  --breakpoint-xs: 320px;
  --breakpoint-sm: 480px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
}

/* Container queries for component-level responsiveness */
@supports (container-type: inline-size) {
  .responsive-container {
    container-type: inline-size;
  }
}

/* Extra small devices (phones in portrait, < 480px) */
@media (max-width: 479px) {
  .hide-xs {
    display: none !important;
  }
  
  .show-xs {
    display: block !important;
  }
  
  /* Increase touch targets for small screens */
  button,
  a,
  input,
  textarea {
    min-height: 44px;
  }
  
  /* Reduce padding for compact layout */
  .compact-xs {
    padding: 8px !important;
  }
  
  /* Full width on small screens */
  .full-width-xs {
    width: 100% !important;
  }
}

/* Small devices (phones in landscape, 480px - 767px) */
@media (min-width: 480px) and (max-width: 767px) {
  .hide-sm {
    display: none !important;
  }
  
  .show-sm {
    display: block !important;
  }
}

/* Medium devices (tablets, 768px - 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
  .hide-md {
    display: none !important;
  }
  
  .show-md {
    display: block !important;
  }
}

/* Large devices (desktops, 1024px and up) */
@media (min-width: 1024px) {
  .hide-lg {
    display: none !important;
  }
  
  .show-lg {
    display: block !important;
  }
}

/* Landscape orientation adjustments */
@media (orientation: landscape) and (max-height: 600px) {
  /* Reduce vertical padding in landscape mode */
  .messages-container {
    padding-top: 8px !important;
    padding-bottom: 8px !important;
  }
  
  .conversation-header {
    min-height: 48px !important;
    padding: 8px 12px !important;
  }
  
  .input-container {
    padding: 8px 12px !important;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Larger touch targets */
  button,
  a[role="button"],
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Remove hover effects on touch devices */
  .no-hover-touch:hover {
    background-color: inherit;
  }
  
  /* Increase spacing for easier tapping */
  .touch-spacing {
    margin: 8px 0;
  }
  
  /* Disable text selection on interactive elements */
  button,
  [role="button"] {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* High DPI displays (Retina, etc.) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Sharper borders */
  .sharp-border {
    border-width: 0.5px;
  }
  
  /* Optimize images */
  img {
    image-rendering: -webkit-optimize-contrast;
  }
}

/* Print styles */
@media print {
  /* Hide interactive elements */
  .input-container,
  .messages-header button,
  .add-contact-button {
    display: none !important;
  }
  
  /* Optimize for printing */
  .message-bubble {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  /* Remove backgrounds for better printing */
  .conversation-view {
    background: white !important;
  }
  
  .message-bubble {
    border: 1px solid #ccc !important;
  }
}

/* Viewport height utilities for mobile browsers */
.full-viewport-height {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile browsers */
}

.min-viewport-height {
  min-height: 100vh;
  min-height: 100dvh;
}

/* Safe area insets for notched devices (iPhone X, etc.) */
@supports (padding: env(safe-area-inset-top)) {
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Apply safe areas to key components */
  .conversation-header {
    padding-top: max(12px, env(safe-area-inset-top));
  }
  
  .input-container {
    padding-bottom: max(12px, env(safe-area-inset-bottom));
  }
}

/* Flexible font sizing */
.responsive-text {
  font-size: clamp(14px, 2.5vw, 16px);
}

.responsive-heading {
  font-size: clamp(18px, 3.5vw, 24px);
}

/* Flexible spacing */
.responsive-padding {
  padding: clamp(12px, 2vw, 20px);
}

.responsive-margin {
  margin: clamp(8px, 1.5vw, 16px);
}

/* Grid and flexbox utilities */
.flex-responsive {
  display: flex;
  flex-wrap: wrap;
  gap: clamp(8px, 2vw, 16px);
}

.grid-responsive {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: clamp(12px, 2vw, 24px);
}

/* Aspect ratio utilities */
.aspect-square {
  aspect-ratio: 1 / 1;
}

.aspect-video {
  aspect-ratio: 16 / 9;
}

/* Overflow handling */
.overflow-scroll-touch {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Focus visible for keyboard navigation */
@supports selector(:focus-visible) {
  *:focus {
    outline: none;
  }
  
  *:focus-visible {
    outline: 2px solid #00a884;
    outline-offset: 2px;
  }
}

/* Reduced data mode (for slow connections) */
@media (prefers-reduced-data: reduce) {
  /* Disable background images */
  .conversation-view {
    background-image: none !important;
  }
  
  /* Reduce animation complexity */
  * {
    animation-duration: 0.1s !important;
  }
}
