# WhatsApp 布局重构需求

## 概述
将当前的两栏布局重构为 WhatsApp 风格的三栏布局，提供更好的用户体验和视觉一致性。

## 当前问题
- 当前布局是左侧边栏 + 右侧主内容区的两栏结构
- 与 WhatsApp 的经典三栏布局不一致
- 消息列表和聊天内容没有分离，导致导航体验不佳

## 目标布局结构

### 三栏布局
```
┌─────────────┬──────────────────┬────────────────────────┐
│             │  [新建聊天 +]    │                        │
│   左侧栏    │  ─────────────   │       右侧栏           │
│  (导航区)   │     中间栏       │     (内容区)           │
│             │   (消息列表)     │                        │
│  - Logo     │                  │  - 聊天界面            │
│  - 消息     │  - 搜索框        │  - 个人资料            │
│  - 设置     │  - 对话列表      │  - 欢迎页面            │
│  - 用户头像 │    • 头像        │  - 联系人选择器        │
│             │    • 用户名      │    (新建聊天时)        │
│             │    • 最后消息    │                        │
│             │    • 未读数      │                        │
└─────────────┴──────────────────┴────────────────────────┘
   80px          400px              剩余空间
```

## 详细需求

### AC1: 左侧栏（导航区）
**作为** 用户  
**我想要** 一个固定的窄导航栏  
**以便** 快速访问主要功能

**验收标准：**
- 宽度固定为 80px
- 包含以下元素（垂直排列）：
  - 顶部：应用 Logo（💬 图标 + "LinkUp" 文字，垂直排列）
  - 中间：导航按钮
    - 消息（💬）+ 未读数角标（默认选中）
    - 设置（⚙️）
  - 底部：用户头像按钮（点击查看个人资料）
- 背景色：#f0f2f5
- 激活状态：绿色指示条（#00a884）+ 浅绿背景
- 悬停效果：背景色变深

### AC2: 中间栏（消息列表区）
**作为** 用户  
**我想要** 看到我的所有对话列表  
**以便** 选择要查看的聊天

**验收标准：**
- 宽度固定为 400px
- 顶部固定区域：
  - 标题栏：
    - 左侧："消息" 标题
    - 右侧："新建聊天" 按钮（➕ 图标或 "新建" 文字）
  - 搜索框（带 🔍 图标，placeholder: "搜索对话"）
- 可滚动对话列表区域：
  - 每个对话项显示：
    - 左侧：用户头像（圆形，49x49px）
    - 中间：
      - 用户名（加粗，14px）
      - 最后一条消息预览（灰色，13px，单行截断）
    - 右侧：
      - 时间戳（灰色，12px）
      - 未读数角标（绿色圆形，白色数字）
  - 列表项高度：72px
  - 悬停效果：背景色 #f5f6f6
  - 选中状态：背景色 #f0f2f5
- 空状态：
  - 显示提示："暂无对话"
  - 引导用户点击"新建聊天"按钮
- 背景色：白色

### AC3: 右侧栏（内容区）
**作为** 用户  
**我想要** 在右侧看到详细内容  
**以便** 进行聊天或查看信息

**验收标准：**
- 占据剩余所有空间
- 根据当前状态显示不同内容：
  - **欢迎页面**（默认，未选中任何对话时）：
    - WhatsApp 风格的欢迎图标
    - "LinkUp Web" 标题
    - 使用说明：
      - "点击左上角'新建聊天'开始对话"
      - "选择左侧对话继续聊天"
    - 端到端加密提示
  - **聊天界面**（选中对话时）：
    - 顶部：对话对象信息栏
      - 头像 + 用户名
      - 返回按钮（仅移动端显示）
    - 中间：消息列表（可滚动）
    - 底部：消息输入框
  - **联系人选择器**（点击"新建聊天"时）：
    - 顶部：
      - 返回按钮 + "选择联系人" 标题
      - 搜索框（placeholder: "搜索或添加联系人"）
    - 内容：
      - 联系人列表（可滚动）
      - 每个联系人显示：头像 + 用户名
      - 点击联系人后：创建/打开对话，切换到聊天界面
    - 底部：
      - "添加新联系人" 按钮（如果搜索无结果）
  - **个人资料**（点击左侧用户头像时）：
    - 顶部：返回按钮 + "个人资料" 标题
    - 内容：个人资料表单
- 背景：
  - 聊天界面：WhatsApp 聊天背景纹理（#efeae2）
  - 其他页面：白色

### AC4: 响应式设计
**作为** 移动设备用户  
**我想要** 布局能适配小屏幕  
**以便** 在手机上也能正常使用

**验收标准：**
- **平板（≤1024px）**：
  - 左侧栏：70px
  - 中间栏：350px
  - 右侧栏：剩余空间
- **手机（≤768px）**：
  - 只显示一栏
  - 左侧栏和中间栏合并为导航页
  - 点击列表项后全屏显示右侧内容
  - 提供返回按钮
- **小手机（≤480px）**：
  - 进一步优化间距和字体大小

### AC5: 导航交互
**作为** 用户  
**我想要** 流畅的导航体验  
**以便** 轻松切换不同功能

**验收标准：**
- **点击"新建聊天"按钮**：
  - 右侧栏显示联系人选择器
  - 中间栏保持消息列表显示
  - 按钮状态变为激活（高亮）
- **在联系人选择器中点击联系人**：
  - 如果已有对话：打开该对话
  - 如果无对话：创建新对话并打开
  - 右侧栏切换到聊天界面
  - 中间栏对应对话项高亮
  - "新建聊天"按钮恢复正常状态
- **点击中间栏对话项**：
  - 右侧栏显示对应聊天界面
  - 对话项显示选中状态（#f0f2f5 背景）
  - 清除该对话的未读数
- **点击左侧用户头像**：
  - 右侧栏显示个人资料
  - 中间栏保持消息列表显示
  - 清除所有对话的选中状态
- **点击返回按钮**（在右侧栏）：
  - 返回欢迎页面
  - 清除中间栏的选中状态
- 所有切换都有平滑过渡动画（300ms ease-out）

### AC6: 视觉一致性
**作为** 用户  
**我想要** 界面看起来像 WhatsApp  
**以便** 获得熟悉的使用体验

**验收标准：**
- 颜色方案：
  - 主色：#00a884（WhatsApp 绿）
  - 背景：#f0f2f5（浅灰）
  - 聊天背景：#efeae2（米色）
  - 选中：#d9fdd3（浅绿）
- 字体：
  - 系统默认字体栈
  - 标题：16px，加粗
  - 正文：14px
  - 辅助文字：13px，灰色
- 圆角：8px
- 阴影：subtle，仅在需要时使用
- 图标：使用 emoji 或 SVG

## 技术约束
- 使用 CSS Flexbox 实现布局
- 不引入新的 UI 库
- 保持现有组件结构，只调整布局
- 确保可访问性（ARIA 标签）

## 非功能需求
- 布局切换动画 < 300ms
- 支持键盘导航
- 支持屏幕阅读器
- 性能：60fps 滚动

## 排除范围
- 不修改现有功能逻辑
- 不添加新功能
- 不修改后端 API
- 不修改数据模型
